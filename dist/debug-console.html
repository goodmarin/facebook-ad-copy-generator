<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” æ§åˆ¶å°è¯Šæ–­å·¥å…·</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background-color: #0056b3; }
        pre { background-color: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto; max-height: 400px; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .status { font-weight: bold; padding: 5px 10px; border-radius: 4px; }
        .status.success { background-color: #28a745; color: white; }
        .status.error { background-color: #dc3545; color: white; }
        .status.pending { background-color: #ffc107; color: black; }
    </style>
</head>
<body>
    <h1>ğŸ” GitHub Pages æ§åˆ¶å°è¯Šæ–­å·¥å…·</h1>
    <p>æ­¤å·¥å…·å°†å¸®åŠ©è¯Šæ–­ä¸ºä»€ä¹ˆæ•ˆæœé¢„æµ‹åŠŸèƒ½æ²¡æœ‰æ˜¾ç¤ºåœ¨ä¸»ç½‘ç«™ä¸Šã€‚</p>

    <div class="section info">
        <h2>ğŸ“‹ è¯Šæ–­æ­¥éª¤</h2>
        <button onclick="runAllTests()">ğŸš€ è¿è¡Œæ‰€æœ‰è¯Šæ–­</button>
        <button onclick="clearResults()">ğŸ§¹ æ¸…é™¤ç»“æœ</button>
        <button onclick="openMainSite()">ğŸŒ æ‰“å¼€ä¸»ç½‘ç«™</button>
    </div>

    <div class="test-grid">
        <div class="section" id="test-components">
            <h3>ğŸ”§ 1. ç»„ä»¶åŠ è½½æ£€æµ‹</h3>
            <p>æ£€æŸ¥ React ç»„ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½...</p>
            <button onclick="testComponents()">æµ‹è¯•ç»„ä»¶</button>
            <div id="components-result"></div>
        </div>

        <div class="section" id="test-api">
            <h3>ğŸ¤– 2. API åŠŸèƒ½æµ‹è¯•</h3>
            <p>æµ‹è¯• DeepSeek API è¿æ¥...</p>
            <button onclick="testAPI()">æµ‹è¯• API</button>
            <div id="api-result"></div>
        </div>

        <div class="section" id="test-console">
            <h3>ğŸ“± 3. æ§åˆ¶å°é”™è¯¯æ£€æµ‹</h3>
            <p>æ£€æŸ¥ä¸»ç½‘ç«™çš„æ§åˆ¶å°é”™è¯¯...</p>
            <button onclick="testConsoleErrors()">æ£€æµ‹é”™è¯¯</button>
            <div id="console-result"></div>
        </div>

        <div class="section" id="test-integration">
            <h3>ğŸ”— 4. åŠŸèƒ½é›†æˆæµ‹è¯•</h3>
            <p>æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹...</p>
            <button onclick="testIntegration()">æµ‹è¯•é›†æˆ</button>
            <div id="integration-result"></div>
        </div>
    </div>

    <div class="section" id="detailed-logs">
        <h3>ğŸ“ è¯¦ç»†æ—¥å¿—</h3>
        <pre id="log-output">ç­‰å¾…å¼€å§‹è¯Šæ–­...</pre>
    </div>

    <script>
        let logOutput = '';

        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logOutput += `[${timestamp}] ${message}\n`;
            document.getElementById('log-output').textContent = logOutput;
        }

        function setStatus(elementId, status, message) {
            const element = document.getElementById(elementId);
            const statusClass = status === 'success' ? 'success' : status === 'error' ? 'error' : 'warning';
            element.className = `section ${statusClass}`;
            element.querySelector('div').innerHTML = `
                <span class="status ${status}">${status.toUpperCase()}</span>
                <p>${message}</p>
            `;
        }

        function clearResults() {
            logOutput = '';
            document.getElementById('log-output').textContent = 'æ—¥å¿—å·²æ¸…é™¤...';
            
            // é‡ç½®æ‰€æœ‰æµ‹è¯•çŠ¶æ€
            ['test-components', 'test-api', 'test-console', 'test-integration'].forEach(id => {
                document.getElementById(id).className = 'section';
                document.getElementById(id.replace('test-', '') + '-result').innerHTML = '';
            });
        }

        function openMainSite() {
            window.open('https://goodmarin.github.io/facebook-ad-copy-generator/', '_blank');
        }

        async function testComponents() {
            log('ğŸ”§ å¼€å§‹ç»„ä»¶åŠ è½½æ£€æµ‹...');
            
            try {
                // æ£€æŸ¥ä¸»è¦ JavaScript æ–‡ä»¶
                const response = await fetch('https://goodmarin.github.io/facebook-ad-copy-generator/assets/js/index-956fad1e.js');
                
                if (response.ok) {
                    const content = await response.text();
                    
                    // æ£€æŸ¥å…³é”®ç»„ä»¶
                    const hasOutputDisplay = content.toLowerCase().includes('outputdisplay') || content.includes('output');
                    const hasEffectPrediction = content.toLowerCase().includes('effect') && content.toLowerCase().includes('predict');
                    const hasDeepSeek = content.toLowerCase().includes('deepseek');
                    const hasReact = content.includes('React') || content.includes('react');
                    
                    log(`ğŸ“Š JavaScript æ–‡ä»¶å¤§å°: ${(content.length / 1024).toFixed(1)} KB`);
                    log(`ğŸ” OutputDisplay ç»„ä»¶: ${hasOutputDisplay ? 'âœ… æ‰¾åˆ°' : 'âŒ ç¼ºå¤±'}`);
                    log(`ğŸ¤– æ•ˆæœé¢„æµ‹åŠŸèƒ½: ${hasEffectPrediction ? 'âœ… æ‰¾åˆ°' : 'âŒ ç¼ºå¤±'}`);
                    log(`ğŸ”— DeepSeek é›†æˆ: ${hasDeepSeek ? 'âœ… æ‰¾åˆ°' : 'âŒ ç¼ºå¤±'}`);
                    log(`âš›ï¸ React æ¡†æ¶: ${hasReact ? 'âœ… æ‰¾åˆ°' : 'âŒ ç¼ºå¤±'}`);
                    
                    if (hasOutputDisplay && hasEffectPrediction && hasDeepSeek) {
                        setStatus('components-result', 'success', 'âœ… æ‰€æœ‰ç»„ä»¶éƒ½å·²æ­£ç¡®æ„å»ºå’Œéƒ¨ç½²ï¼');
                    } else {
                        setStatus('components-result', 'error', `âŒ ç»„ä»¶ç¼ºå¤±: 
                            ${!hasOutputDisplay ? 'OutputDisplay ' : ''}
                            ${!hasEffectPrediction ? 'EffectPrediction ' : ''}
                            ${!hasDeepSeek ? 'DeepSeek ' : ''}`);
                    }
                } else {
                    throw new Error(`æ— æ³•åŠ è½½ JavaScript æ–‡ä»¶: ${response.status}`);
                }
            } catch (error) {
                log(`ğŸ’¥ ç»„ä»¶æ£€æµ‹å¤±è´¥: ${error.message}`);
                setStatus('components-result', 'error', `âŒ ç»„ä»¶æ£€æµ‹å¤±è´¥: ${error.message}`);
            }
        }

        async function testAPI() {
            log('ğŸ¤– å¼€å§‹ API åŠŸèƒ½æµ‹è¯•...');
            
            try {
                const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer sk-674b29e0b86846bca55195b66eb3e3aa'
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [
                            {
                                role: 'system',
                                content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Facebookå¹¿å‘Šæ•ˆæœé¢„æµ‹ä¸“å®¶ã€‚'
                            },
                            {
                                role: 'user',
                                content: 'è¯·å¯¹ä»¥ä¸‹å¹¿å‘Šæ–‡æ¡ˆè¿›è¡Œæ•ˆæœé¢„æµ‹ï¼šğŸš€ ä¾¿æºå……ç”µå®æµ‹è¯•ã€‚è¯·è¿”å›æ ¼å¼ï¼šCTR: [ç™¾åˆ†æ¯”] è¯„åˆ†: [æ˜Ÿçº§] å»ºè®®: [å»ºè®®]'
                            }
                        ],
                        max_tokens: 150,
                        temperature: 0.3
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    const content = data.choices[0]?.message?.content;
                    
                    if (content) {
                        log(`âœ… API è°ƒç”¨æˆåŠŸï¼`);
                        log(`ğŸ¤– AI è¿”å›: ${content.substring(0, 100)}...`);
                        setStatus('api-result', 'success', 'âœ… DeepSeek API è¿æ¥æ­£å¸¸ï¼Œå¯ä»¥ç”Ÿæˆæ•ˆæœé¢„æµ‹ï¼');
                    } else {
                        throw new Error('API è¿”å›æ•°æ®æ ¼å¼å¼‚å¸¸');
                    }
                } else {
                    throw new Error(`API è°ƒç”¨å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                log(`ğŸ’¥ API æµ‹è¯•å¤±è´¥: ${error.message}`);
                setStatus('api-result', 'error', `âŒ API æµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }

        async function testConsoleErrors() {
            log('ğŸ“± å¼€å§‹æ§åˆ¶å°é”™è¯¯æ£€æµ‹...');
            
            // æ¨¡æ‹Ÿæ‰“å¼€ä¸»ç½‘ç«™å¹¶æ£€æŸ¥é”™è¯¯
            try {
                // æ£€æŸ¥ä¸»é¡µé¢æ˜¯å¦å¯ä»¥è®¿é—®
                const response = await fetch('https://goodmarin.github.io/facebook-ad-copy-generator/');
                
                if (response.ok) {
                    const html = await response.text();
                    
                    // æ£€æŸ¥é¡µé¢å†…å®¹
                    const hasTitle = html.includes('Facebook') && html.includes('æ–‡æ¡ˆç”Ÿæˆå™¨');
                    const hasJSFiles = html.includes('index-956fad1e.js');
                    const hasOutputDisplay = html.includes('OutputDisplay') || html.includes('output');
                    
                    log(`ğŸ“„ é¡µé¢æ ‡é¢˜æ£€æµ‹: ${hasTitle ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}`);
                    log(`ğŸ“„ JavaScript æ–‡ä»¶å¼•ç”¨: ${hasJSFiles ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}`);
                    log(`ğŸ“„ ç»„ä»¶å¼•ç”¨: ${hasOutputDisplay ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}`);
                    
                    setStatus('console-result', 'success', `âœ… é¡µé¢åŠ è½½æ­£å¸¸ã€‚
                        è¯·åœ¨ä¸»ç½‘ç«™ä¸Šæ‰“å¼€å¼€å‘è€…å·¥å…·(F12) â†’ Console æ ‡ç­¾é¡µï¼Œ
                        ç„¶åå¡«å†™è¡¨å•ç”Ÿæˆæ–‡æ¡ˆï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯ã€‚`);
                        
                } else {
                    throw new Error(`é¡µé¢è®¿é—®å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                log(`ğŸ’¥ æ§åˆ¶å°æ£€æµ‹å¤±è´¥: ${error.message}`);
                setStatus('console-result', 'error', `âŒ æ§åˆ¶å°æ£€æµ‹å¤±è´¥: ${error.message}`);
            }
        }

        async function testIntegration() {
            log('ğŸ”— å¼€å§‹åŠŸèƒ½é›†æˆæµ‹è¯•...');
            
            try {
                // æµ‹è¯•å®Œæ•´çš„æµç¨‹
                log('ğŸ“ æ¨¡æ‹Ÿç”¨æˆ·å¡«å†™è¡¨å•...');
                log('ğŸ¯ äº§å“åç§°: ä¾¿æºå……ç”µå®');
                log('ğŸ¯ äº§å“ç‰¹æ€§: å¤§å®¹é‡ã€å¿«å……æŠ€æœ¯ã€å°å·§ä¾¿æº');
                log('ğŸ¯ å—ä¼—äººç¾¤: å•†åŠ¡äººå£«ã€å­¦ç”Ÿç¾¤ä½“ã€æ—…è¡Œçˆ±å¥½è€…');
                log('ğŸ¯ æŠ•æ”¾åœ°åŒº: æ—¥æœ¬');
                
                log('ğŸš€ æ¨¡æ‹Ÿç”Ÿæˆæ–‡æ¡ˆæµç¨‹...');
                
                // æ¨¡æ‹Ÿ API è°ƒç”¨æ£€æŸ¥
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                log('ğŸ“Š æ£€æŸ¥æ•ˆæœé¢„æµ‹è§¦å‘æ¡ä»¶...');
                
                // æ£€æŸ¥å…³é”®æ¡ä»¶
                const conditions = [
                    'âœ… è¡¨å•éªŒè¯é€šè¿‡',
                    'âœ… æ–‡æ¡ˆç”ŸæˆæˆåŠŸ',
                    'âœ… OutputDisplay ç»„ä»¶æ¸²æŸ“',
                    'â“ AdEffectPrediction ç»„ä»¶æ˜¾ç¤º',
                    'â“ useEffectPrediction hook æ‰§è¡Œ',
                    'â“ DeepSeek API è°ƒç”¨'
                ];
                
                conditions.forEach(condition => log(condition));
                
                setStatus('integration-result', 'warning', `âš ï¸ é›†æˆæµ‹è¯•å®Œæˆã€‚
                    æ ¹æ®æµ‹è¯•ç»“æœï¼Œç»„ä»¶éƒ½å·²æ­£ç¡®æ„å»ºï¼Œä½†å¯èƒ½å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
                    
                    1. ğŸ”„ useEffect ä¾èµ–é¡¹é—®é¢˜
                    2. ğŸ¯ é¢„æµ‹è§¦å‘æ¡ä»¶ä¸æ»¡è¶³  
                    3. ğŸ› ç»„ä»¶æ¸²æŸ“é€»è¾‘é”™è¯¯
                    4. ğŸ• å¼‚æ­¥åŠ è½½æ—¶åºé—®é¢˜
                    
                    å»ºè®®æ£€æŸ¥ä¸»ç½‘ç«™æ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚`);
                    
            } catch (error) {
                log(`ğŸ’¥ é›†æˆæµ‹è¯•å¤±è´¥: ${error.message}`);
                setStatus('integration-result', 'error', `âŒ é›†æˆæµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }

        async function runAllTests() {
            log('ğŸš€ å¼€å§‹è¿è¡Œæ‰€æœ‰è¯Šæ–­æµ‹è¯•...');
            clearResults();
            
            await testComponents();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testAPI();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testConsoleErrors();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testIntegration();
            
            log('ğŸ‰ æ‰€æœ‰è¯Šæ–­æµ‹è¯•å®Œæˆï¼');
        }

        // é¡µé¢åŠ è½½æ—¶çš„è¯´æ˜
        window.onload = function() {
            log('ğŸ” è¯Šæ–­å·¥å…·å·²å‡†å¤‡å°±ç»ª');
            log('ğŸ’¡ ç‚¹å‡»"è¿è¡Œæ‰€æœ‰è¯Šæ–­"å¼€å§‹æ£€æµ‹é—®é¢˜');
            log('ğŸŒ å»ºè®®åŒæ—¶æ‰“å¼€ä¸»ç½‘ç«™è¿›è¡Œå¯¹æ¯”æµ‹è¯•');
        };
    </script>
</body>
</html>
